<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/protected/front/css/style.css" />
    <link rel="stylesheet" href="/protected/front/css/pdf.css" />

    <script src="https://kit.fontawesome.com/b89837f3ad.js" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>

    <link rel="icon" type="image/x-icon" href="/protected/front/img/snorkel.png">
    <title>Scuba-Diving Manager</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

    <script>
        window.html2canvas = html2canvas;
        window.jsPDF = window.jspdf.jsPDF;

        function createPDF() {      
            html2canvas(document.querySelector("#pdf_info"), {
                
                allowTaint: true,
                useCORS: true,
                scale: 1,
            }).then(canvas => {
                document.body.appendChild(canvas);
                
                var img = canvas.toDataURL("image/png");
                var doc = new jsPDF("p", "mm", "a4");
                //doc.setFont('Arial');
                //doc.getFontSize(40);
                doc.addImage(img, 'JPEG', 0, 0, 210, 297);
                doc.save("TEST"); 
            });    
        }

        function downloadPDF() { setTimeout(createPDF(), 5000); }
    </script>

</head>

<body>
    <button onclick="downloadPDF()">Create PDF</button>

    <div id="pdf_info">
        <p>BOUUUUUUUUUUUUUUUUUUUUUUUULES</p>
    </div>

    
    <!--Chargement-->
    <div id="ring-loading" class="ring">Chargement
        <span class="span-ring"></span>
    </div>
</body>

<script type="module" src="/protected/front/js/security_pdf.js"></script>

</html>
